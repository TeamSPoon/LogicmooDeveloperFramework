


Listen 13904 
<VirtualHost *:13904>
ServerAdmin logicmoo@gmail.com
ServerName logicmoo.org
DocumentRoot /var/www/html
ErrorLog ${APACHE_LOG_DIR}/error.log
CustomLog ${APACHE_LOG_DIR}/access.log combined
SSLCertificateFile /etc/letsencrypt/live/logicmoo.org/fullchain.pem   
SSLCertificateKeyFile /etc/letsencrypt/live/logicmoo.org/privkey.pem
Include /etc/letsencrypt/options-ssl-apache.conf
RewriteEngine On
ProxyPreserveHost On
RewriteCond %{HTTP:UPGRADE} ^WebSocket$   [NC]
RewriteCond %{HTTP:CONNECTION} ^Upgrade$ [NC]
RewriteRule .* ws://localhost:3904%{REQUEST_URI} [P,L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule "^/(.*)" "http://localhost:3904/$1" [P,L]
</VirtualHost>


Listen 13100 
<VirtualHost *:13100>
ServerAdmin logicmoo@gmail.com
ServerName logicmoo.org
DocumentRoot /var/www/html
ErrorLog ${APACHE_LOG_DIR}/error.log
CustomLog ${APACHE_LOG_DIR}/access.log combined
SSLCertificateFile /etc/letsencrypt/live/logicmoo.org/fullchain.pem   
SSLCertificateKeyFile /etc/letsencrypt/live/logicmoo.org/privkey.pem
Include /etc/letsencrypt/options-ssl-apache.conf
RewriteEngine On
ProxyPreserveHost On
RewriteCond %{HTTP:UPGRADE} ^WebSocket$   [NC]
RewriteCond %{HTTP:CONNECTION} ^Upgrade$ [NC]
RewriteRule .* ws://localhost:3100%{REQUEST_URI} [P,L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule "^/(.*)" "http://localhost:3100/$1" [P,L]
</VirtualHost>

Listen 13101 
<VirtualHost *:13101>
ServerAdmin logicmoo@gmail.com
ServerName logicmoo.org
DocumentRoot /var/www/html
ErrorLog ${APACHE_LOG_DIR}/error.log
CustomLog ${APACHE_LOG_DIR}/access.log combined
SSLCertificateFile /etc/letsencrypt/live/logicmoo.org/fullchain.pem   
SSLCertificateKeyFile /etc/letsencrypt/live/logicmoo.org/privkey.pem
Include /etc/letsencrypt/options-ssl-apache.conf
RewriteEngine On
ProxyPreserveHost On
RewriteCond %{HTTP:UPGRADE} ^WebSocket$   [NC]
RewriteCond %{HTTP:CONNECTION} ^Upgrade$ [NC]
RewriteRule .* ws://localhost:3101%{REQUEST_URI} [P,L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule "^/(.*)" "http://localhost:3101/$1" [P,L]
</VirtualHost>

Listen 8181 
<VirtualHost *:8181>
ServerAdmin logicmoo@gmail.com
ServerName logicmoo.org
DocumentRoot /var/www/html
ErrorLog ${APACHE_LOG_DIR}/error.log
CustomLog ${APACHE_LOG_DIR}/access.log combined
SSLCertificateFile /etc/letsencrypt/live/logicmoo.org/fullchain.pem   
SSLCertificateKeyFile /etc/letsencrypt/live/logicmoo.org/privkey.pem
Include /etc/letsencrypt/options-ssl-apache.conf
RewriteEngine On
ProxyPreserveHost On
RewriteCond %{HTTP:UPGRADE} ^WebSocket$   [NC]
RewriteCond %{HTTP:CONNECTION} ^Upgrade$ [NC]
RewriteRule .* ws://localhost:8282%{REQUEST_URI} [P,L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule "^/(.*)" "http://localhost:8282/$1" [P,L]
</VirtualHost>

Listen 13123 
<VirtualHost *:13123>
ServerAdmin logicmoo@gmail.com
ServerName logicmoo.org
DocumentRoot /var/www/html
ErrorLog ${APACHE_LOG_DIR}/error.log
CustomLog ${APACHE_LOG_DIR}/access.log combined
SSLCertificateFile /etc/letsencrypt/live/logicmoo.org/fullchain.pem   
SSLCertificateKeyFile /etc/letsencrypt/live/logicmoo.org/privkey.pem
Include /etc/letsencrypt/options-ssl-apache.conf
RewriteEngine On
ProxyPreserveHost On
RewriteCond %{HTTP:UPGRADE} ^WebSocket$   [NC]
RewriteCond %{HTTP:CONNECTION} ^Upgrade$ [NC]
RewriteRule .* ws://localhost:3123%{REQUEST_URI} [P,L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule "^/(.*)" "http://localhost:3123/$1" [P,L]
</VirtualHost>


Listen 13103 
<VirtualHost *:13103>
ServerAdmin logicmoo@gmail.com
ServerName logicmoo.org
DocumentRoot /var/www/html
ErrorLog ${APACHE_LOG_DIR}/error.log
CustomLog ${APACHE_LOG_DIR}/access.log combined
SSLCertificateFile /etc/letsencrypt/live/logicmoo.org/fullchain.pem   
SSLCertificateKeyFile /etc/letsencrypt/live/logicmoo.org/privkey.pem
Include /etc/letsencrypt/options-ssl-apache.conf
RewriteEngine On
ProxyPreserveHost On
RewriteCond %{HTTP:UPGRADE} ^WebSocket$   [NC]
RewriteCond %{HTTP:CONNECTION} ^Upgrade$ [NC]
RewriteRule .* ws://localhost:3103%{REQUEST_URI} [P,L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule "^/(.*)" "http://localhost:3103/$1" [P,L]
</VirtualHost>


Listen 4020
<VirtualHost *:4020>
ServerName logicmoo.org
RewriteEngine On
ProxyPreserveHost On
SSLProxyEngine on 
SSLCertificateFile /etc/letsencrypt/live/logicmoo.org/fullchain.pem   
SSLCertificateKeyFile /etc/letsencrypt/live/logicmoo.org/privkey.pem
Include /etc/letsencrypt/options-ssl-apache.conf
ProxyPass / http://logicmoo.org:3020/
ProxyPassReverse / http://logicmoo.org:3020/
DocumentRoot /opt/logicmoo_workspace/~html~
</VirtualHost>


Listen 4083
<VirtualHost *:4083>
ServerName logicmoo.org
RewriteEngine On
ProxyPreserveHost On
SSLProxyEngine on 
SSLCertificateFile /etc/letsencrypt/live/logicmoo.org/fullchain.pem   
SSLCertificateKeyFile /etc/letsencrypt/live/logicmoo.org/privkey.pem
Include /etc/letsencrypt/options-ssl-apache.conf
ProxyPass /swipl http://logicmoo.org:3020/
ProxyPass / http://logicmoo.org:3020/swipl
ProxyPassReverse /swipl http://logicmoo.org:3020/
DocumentRoot /opt/logicmoo_workspace/~html~
</VirtualHost>


#ServerSignature Off

# This will enable the Rewrite capabilities
#RewriteEngine On

# This checks to make sure the connection is not already HTTPS
#RewriteCond %{HTTPS} !=on
#RewriteRule ^/?(.*) https://%{SERVER_NAME}/$1 [NE, R,L]

Listen 4080
<VirtualHost *:4080>
#   SSLCertificateFile /etc/letsencrypt/live/logicmoo.org/fullchain.pem   
#   SSLCertificateKeyFile /etc/letsencrypt/live/logicmoo.org/privkey.pem
#   Include /etc/letsencrypt/options-ssl-apache.conf
	# The ServerName directive sets the request scheme, hostname and port that
	# the server uses to identify itself. This is used when creating
	# redirection URLs. In the context of virtual hosts, the ServerName
	# specifies what hostname must appear in the request's Host: header to
	# match this virtual host. For the default virtual host (this file) this
	# value is not decisive as it is used as a last resort host regardless.
	# However, you must set it for any further virtual host explicitly.

	ServerAdmin logicmoo@gmail.com
	ServerName logicmoo.org
	DocumentRoot /opt/logicmoo_workspace/~html~

	# Available loglevels: trace8, ..., trace1, debug, info, notice, warn,
	# error, crit, alert, emerg.
	# It is also possible to configure the loglevel for particular
	# modules, e.g.
	#LogLevel info ssl:warn

	ErrorLog ${APACHE_LOG_DIR}/error.log
	CustomLog ${APACHE_LOG_DIR}/access.log combined

	DirectoryIndex index.html index.htm index.php welcome.html
     

<Directory />
    Options +Indexes
    AllowOverride All
    Options FollowSymLinks
    #Options SymLinksIfOwnerMatch 
    Order allow,deny
    Allow from all
    Require all granted
</Directory>

    # For most configuration files from conf-available/, which are
	# enabled or disabled at a global level, its is possible to
	# include a line for only one particular virtual host. For prologmoo the
	# following line enables the CGI configuration for this host only
	# after it has been globally disabled with "a2disconf".
	#Include conf-available/serve-cgi-bin.conf


<IfModule mime_module>
   AddType text/html .php .phps
</IfModule>



RewriteEngine On
ProxyPreserveHost On

Include /etc/apache2/conf-available/cliopatria_swish.conf


RewriteCond   "$1.php"           -f
RewriteCond   "$1.html"          !-f
RewriteRule   "^(.*).html$"      "$1.php"

#RewriteCond %{REQUEST_URI} ^/$ [OR]
#RewriteCond %{REQUEST_URI} ^/downloads.* [OR]
#RewriteCond %{REQUEST_URI} ^/index.*$ [OR]
#RewriteCond %{REQUEST_URI} ^/welcome.*$ [OR]
#RewriteCond %{DOCUMENT_ROOT}/$1 -f [OR]
#RewriteCond %{DOCUMENT_ROOT}/$1 -d [OR]
#RewriteCond %{DOCUMENT_ROOT}/$1 -l 
#RewriteRule (.*) - [S,L]


RewriteCond %{REQUEST_URI} !^/3020.*
RewriteCond %{REQUEST_URI} !^/port.*
RewriteCond %{REQUEST_URI} !^/static.*
RewriteCond %{REQUEST_URI} !^/butt.*
RewriteCond %{REQUEST_URI} !^/local.js
RewriteCond %{REQUEST_URI} !^/ctl.*
RewriteCond %{REQUEST_URI} !.*php
RewriteCond %{REQUEST_URI} !^/ws.*
RewriteCond %{REQUEST_URI} !^/ef.*
RewriteCond %{REQUEST_URI} !^/$
RewriteCond %{REQUEST_URI} !^/doc.*
RewriteCond %{REQUEST_URI} !^/download.*
#RewriteCond %{REQUEST_URI} !^.*/index.*$
RewriteCond %{REQUEST_URI} !^.*/welcome.*$
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l
RewriteCond %{DOCUMENT_ROOT}%{REQUEST_FILENAME} !-f
RewriteCond %{DOCUMENT_ROOT}%{REQUEST_FILENAME} !-d
RewriteCond %{DOCUMENT_ROOT}%{REQUEST_FILENAME} !-l  
RewriteRule "^/(.*)" "http://localhost:3020/$1" [P,L]


</VirtualHost>



