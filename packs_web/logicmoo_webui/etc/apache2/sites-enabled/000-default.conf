<VirtualHost *:80>
ServerName logicmoo.org
Redirect / https://logicmoo.org/wordpress/


Header always set X-Frame-Options "SAMEORIGIN"

#ServerSignature Off


# This will enable the Rewrite capabilities
#RewriteEngine On

# This checks to make sure the connection is not already HTTPS
# RewriteCond %{HTTPS} !=on
# RewriteRule ^/?(.*) https://%{SERVER_NAME}/$1 [NE, R,L]

	# The ServerName directive sets the request scheme, hostname and port that
	# the server uses to identify itself. This is used when creating
	# redirection URLs. In the context of virtual hosts, the ServerName
	# specifies what hostname must appear in the request's Host: header to
	# match this virtual host. For the default virtual host (this file) this
	# value is not decisive as it is used as a last resort host regardless.
	# However, you must set it for any further virtual host explicitly.

	ServerAdmin logicmoo@gmail.com
	ServerName logicmoo.org
	DocumentRoot /var/www/html

	# Available loglevels: trace8, ..., trace1, debug, info, notice, warn,
	# error, crit, alert, emerg.
	# It is also possible to configure the loglevel for particular
	# modules, e.g.
	#LogLevel info ssl:warn

	ErrorLog ${APACHE_LOG_DIR}/error.log
	CustomLog ${APACHE_LOG_DIR}/access.log combined

RewriteEngine On
ProxyPreserveHost On

<Directory />
    AllowOverride All
    Options +Indexes +FollowSymLinks
    # IndexOptions +FancyIndexing
    # Options SymLinksIfOwnerMatch 
    # Order allow,deny
    Allow from all
    #Require all granted
</Directory>


# Ensure that encoded slashes are not decoded but left in their encoded state.                                                                                                                                                                                                    
# http://doc.gitlab.com/ce/api/projects.html#get-single-project                                                                                                                                                                                                                   
#AllowEncodedSlashes NoDecode

# This will enable the Rewrite capabilities                                                                                                                                                                                                                                       
#RewriteCond %{HTTPS} !=on
# This checks to make sure the connection is not already HTTPS                                                                                                                                                                                                                    
#RewriteRule ^/?(.*) https://%{SERVER_NAME}/$1 [R,L]
                                                                                                                                                                                            
# RequestHeader set X-Forwarded-Proto "https"
# RequestHeader set X-Forwarded-Ssl on

#ProxyPass /gitlab/ http://logicmoo.org:1080/gitlab/                          
#ProxyPassReverse /gitlab http://logicmoo.org:1080/gitlab

#ProxyPass / https://logicmoo.org/
#ProxyPassReverse / https://logicmoo.org/

#Include /etc/apache2/conf-available/cliopatria_swish.conf


#ProxyPass /wordpress/ https://logicmoo.org:1800/
#ProxyPassReverse /wordpress/ https://logicmoo.org:1800/

#ProxyPassReverse "/" "http://logicmoo.org:5005/"
#ProxyPassReverse "/" "https://logicmoo.org:5005/"

RewriteCond %{REQUEST_URI} !^/$
RewriteCond %{REQUEST_URI} !^/index.*
RewriteCond %{REQUEST_URI} !^/old-index.*
RewriteCond %{REQUEST_URI} !^/favicon.*
RewriteCond %{REQUEST_URI} !^/assets/.*
RewriteCond %{REQUEST_URI} !^/vendor/.*
RewriteCond %{REQUEST_URI} !^/wordpress.*
RewriteCond %{REQUEST_URI} !^/do.*
RewriteCond %{REQUEST_URI} !^/cyc.*
RewriteCond %{REQUEST_URI} !^/privacy.html
RewriteCond %{REQUEST_URI} !^/gitlab.*
RewriteCond %{REQUEST_URI} !^/wiki.*
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule "^/(.*)" "http://localhost:4080/$1" [P,L]
# RewriteRule .? /index.php?url=%{REQUEST_URI} [L,QSA]

# ProxyPassReverse "/" "http://www.swi-prolog.org"
# ProxyPassReverse "/" "https://edu.swi-prolog.org"
# ProxyPassReverse "/" "http://logicmoo.org:4080"


</VirtualHost>
